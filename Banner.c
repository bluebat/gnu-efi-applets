/* banner - print a banner		Author: Brian Wallis */

/*****************************************************************
 *
 * SYSVbanner.c
 *
 * This is a PD version of the SYS V banner program (at least I think
 * it is compatible to SYS V) which I wrote to use with the clock
 * program written by:
 **     DCF, Inc.
 **     14623 North 49th Place
 **     Scottsdale, AZ 85254
 * and published in the net comp.sources.misc newsgroup in early July
 * since the BSD banner program works quite differently.
 *
 * There is no copyright or responsibility accepted for the use
 * of this software.
 *
 * Brian Wallis, brw@jim.odr.oz, 4 July 1988
 * GNU-EFI porting by Wei-Lun Chao <bluebat@memger.fsf.org>, 2017
 *
 *****************************************************************/

#include <efi.h>
#include <efilib.h>

CHAR16 *glyphs[] = {
	  L"         @@@  @@   @@  @ @   @@@@@          @@     @@@  ",
	  L"         @@@  @@   @@  @ @  @  @  @@@   @  @  @    @@@  ",
	  L"         @@@   @   @ @@@@@@@@  @   @@  @    @@      @   ",
	  L"          @            @ @   @@@@@    @    @@@     @    ",
	  L"                     @@@@@@@   @  @  @    @   @ @       ",
	  L"         @@@           @ @  @  @  @ @  @@ @    @        ",
	  L"         @@@           @ @   @@@@@ @   @@  @@@@ @       ",

	  L"   @@    @@                                            @",
	  L"  @        @   @   @    @                             @ ",
	  L" @          @   @ @     @                            @  ",
	  L" @          @ @@@@@@@ @@@@@   @@@   @@@@@           @   ",
	  L" @          @   @ @     @     @@@                  @    ",
	  L"  @        @   @   @    @      @            @@@   @     ",
	  L"   @@    @@                   @             @@@  @      ",

	  L"  @@@     @    @@@@@  @@@@@ @      @@@@@@@ @@@@@ @@@@@@@",
	  L" @   @   @@   @     @@     @@    @ @      @     @@    @ ",
	  L"@   @ @ @ @         @      @@    @ @      @          @  ",
	  L"@  @  @   @    @@@@@  @@@@@ @@@@@@@ @@@@@ @@@@@@    @   ",
	  L"@ @   @   @   @            @     @       @@     @  @    ",
	  L" @   @    @   @      @     @     @ @     @@     @  @    ",
	  L"  @@@   @@@@@ @@@@@@@ @@@@@      @  @@@@@  @@@@@   @    ",

	  L" @@@@@  @@@@@          @@@      @           @     @@@@@ ",
	  L"@     @@     @  @@@    @@@     @             @   @     @",
	  L"@     @@     @  @@@           @     @@@@@     @        @",
	  L" @@@@@  @@@@@@         @@@   @                 @     @@ ",
	  L"@     @      @         @@@    @     @@@@@     @     @   ",
	  L"@     @@     @  @@@     @      @             @          ",
	  L" @@@@@  @@@@@   @@@    @        @           @       @   ",

	  L" @@@@@    @   @@@@@@  @@@@@ @@@@@@ @@@@@@@@@@@@@@ @@@@@ ",
	  L"@     @  @ @  @     @@     @@     @@      @      @     @",
	  L"@ @@@ @ @   @ @     @@      @     @@      @      @      ",
	  L"@ @ @ @@     @@@@@@@ @      @     @@@@@@  @@@@@  @  @@@@",
	  L"@ @@@@ @@@@@@@@     @@      @     @@      @      @     @",
	  L"@     @@     @@     @@     @@     @@      @      @     @",
	  L" @@@@@ @     @@@@@@@  @@@@@ @@@@@@ @@@@@@@@       @@@@@ ",

	  L"@     @  @*@        @@    @ @      @     @@     @@@@@@@@",
	  L"@     @   @         @@   @  @      @@   @@@@    @@     @",
	  L"@     @   @         @@  @   @      @ @ @ @@ @   @@     @",
	  L"@@@@@@@   @         @@@@    @      @  @  @@  @  @@     @",
	  L"@     @   @   @     @@  @   @      @     @@   @ @@     @",
	  L"@     @   @   @     @@   @  @      @     @@    @@@     @",
	  L"@     @  @@@   @@@@@ @    @ @@@@@@@@     @@     @@@@@@@@",

	  L"@@@@@@  @@@@@ @@@@@@  @@@@@ @@@@@@@@     @@     @@     @",
	  L"@     @@     @@     @@     @   @   @     @@     @@  @  @",
	  L"@     @@     @@     @@         @   @     @@     @@  @  @",
	  L"@@@@@@ @     @@@@@@@  @@@@@    @   @     @@     @@  @  @",
	  L"@      @   @ @@   @        @   @   @     @ @   @ @  @  @",
	  L"@      @    @ @    @ @     @   @   @     @  @ @  @  @  @",
	  L"@       @@@@ @@     @ @@@@@    @    @@@@@    @    @@ @@ ",

	  L"@     @@     @@@@@@@@ @@@@@ @       @@@@@    @          ",
	  L" @   @  @   @      @  @      @          @   @ @         ",
	  L"  @ @    @ @      @   @       @         @  @   @        ",
	  L"   @      @      @    @        @        @               ",
	  L"  @ @     @     @     @         @       @               ",
	  L" @   @    @    @      @          @      @               ",
	  L"@     @   @   @@@@@@@ @@@@@       @ @@@@@        @@@@@@@",

	  L"  @@@                                                   ",
	  L"  @@@     @@   @@@@@   @@@@  @@@@@  @@@@@@ @@@@@@  @@@@ ",
	  L"   @     @  @  @    @ @    @ @    @ @      @      @    @",
	  L"    @   @    @ @@@@@  @      @    @ @@@@@  @@@@@  @     ",
	  L"        @@@@@@ @    @ @      @    @ @      @      @  @@@",
	  L"        @    @ @    @ @    @ @    @ @      @      @    @",
	  L"        @    @ @@@@@   @@@@  @@@@@  @@@@@@ @       @@@@ ",

	  L"                                                        ",
	  L" @    @    @        @ @    @ @      @    @ @    @  @@@@ ",
	  L" @    @    @        @ @   @  @      @@  @@ @@   @ @    @",
	  L" @@@@@@    @        @ @@@@   @      @ @@ @ @ @  @ @    @",
	  L" @    @    @        @ @  @   @      @    @ @  @ @ @    @",
	  L" @    @    @   @    @ @   @  @      @    @ @   @@ @    @",
	  L" @    @    @    @@@@  @    @ @@@@@@ @    @ @    @  @@@@ ",

	  L"                                                        ",
	  L" @@@@@   @@@@  @@@@@   @@@@   @@@@@ @    @ @    @ @    @",
	  L" @    @ @    @ @    @ @         @   @    @ @    @ @    @",
	  L" @    @ @    @ @    @  @@@@     @   @    @ @    @ @    @",
	  L" @@@@@  @  @ @ @@@@@       @    @   @    @ @    @ @ @@ @",
	  L" @      @   @  @   @  @    @    @   @    @  @  @  @@  @@",
	  L" @       @@@ @ @    @  @@@@     @    @@@@    @@   @    @",

	  L"                       @@@     @     @@@   @@    @ @ @ @",
	  L" @    @  @   @ @@@@@@ @        @        @ @  @  @ @ @ @ ",
	  L"  @  @    @ @      @  @        @        @     @@ @ @ @ @",
	  L"   @@      @      @  @@                 @@        @ @ @ ",
	  L"   @@      @     @    @        @        @        @ @ @ @",
	  L"  @  @     @    @     @        @        @         @ @ @ ",
	  L" @    @    @   @@@@@@  @@@     @     @@@         @ @ @ @"
};

EFI_STATUS
efi_main (IN EFI_HANDLE ImageHandle, IN EFI_SYSTEM_TABLE *SystemTable)
{
  UINTN argc;
  CHAR16 **argv;
  
  INTN a, b, c, len, ind;
  CHAR16 line[80];

  InitializeLib(ImageHandle, SystemTable);
  argc = GetShellArgcArgv(ImageHandle, &argv);

  for (argv++; --argc; argv++) {
	len = StrLen(*argv);
//	if (len > 10) len = 10;
	for (a = 0; a < 7; a++) {
		for (b = 0; b < len; b++) {
			if ((ind = (*argv)[b] - ' ') < 0) ind = 0;
			for (c = 0; c < 7; c++) {
				line[b * 8 + c] = glyphs[(ind / 8 * 7) + a][(ind % 8 * 7) + c] == '@' ? ind + ' ' : ' ';
			}
			line[b * 8 + 7] = ' ';
		}
		for (b = len * 8 - 1; b >= 0; b--) {
			if (line[b] != ' ') break;
			line[b] = '\0';
		}
		Print(L"%s\n", line);
	}
	Print(L"\n");
  }
  return EFI_SUCCESS;
}
